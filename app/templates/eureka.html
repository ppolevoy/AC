{% extends "base.html" %}

{% block title %}Faktura Apps - Eureka{% endblock %}

{% block page_title %}Eureka –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/eureka.css') }}">
{% endblock %}

{% block content %}
<div class="eureka-container">
    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
    <div class="controls-panel">
        <div class="filters-section">
            <div class="filter-group">
                <label>–°–µ—Ä–≤–µ—Ä Eureka:</label>
                <div class="select-container">
                    <select id="server-filter" class="filter-select">
                        <option value="">–í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã</option>
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <div class="filter-group">
                <label>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</label>
                <div class="select-container">
                    <select id="app-filter" class="filter-select">
                        <option value="">–í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</option>
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <div class="filter-group">
                <label>–°—Ç–∞—Ç—É—Å:</label>
                <div class="select-container">
                    <select id="status-filter" class="filter-select">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        <option value="UP">UP</option>
                        <option value="DOWN">DOWN</option>
                        <option value="PAUSED">PAUSED</option>
                        <option value="STARTING">STARTING</option>
                        <option value="OUT_OF_SERVICE">OUT_OF_SERVICE</option>
                    </select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <div class="search-group">
                <input type="text" id="search-input" class="search-input" placeholder="–ü–æ–∏—Å–∫ instance...">
                <span class="search-icon">üîç</span>
            </div>
        </div>

        <div class="action-buttons">
            <button id="refresh-btn" class="action-btn primary-btn" title="–û–±–Ω–æ–≤–∏—Ç—å">
                <span class="refresh-icon">‚Üª</span> –û–±–Ω–æ–≤–∏—Ç—å
            </button>

            <div class="filter-group" style="margin-left: auto;">
                <label>–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</label>
                <div class="select-container">
                    <select id="refresh-interval-select" class="filter-select">
                        <option value="0">–û—Ç–∫–ª.</option>
                        <option value="5000">5 —Å–µ–∫</option>
                        <option value="15000">15 —Å–µ–∫</option>
                        <option value="30000" selected>30 —Å–µ–∫</option>
                        <option value="60000">60 —Å–µ–∫</option>
                    </select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="global-stats">
        <div class="stat-card">
            <div class="summary-label">–í—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</div>
            <div class="summary-value" id="total-apps">0</div>
        </div>
        <div class="stat-card">
            <div class="summary-label">–í—Å–µ–≥–æ instances</div>
            <div class="summary-value" id="total-instances">0</div>
        </div>
        <div class="stat-card success">
            <div class="summary-label">
                <span class="status-dot status-up"></span> UP
            </div>
            <div class="summary-value" id="up-count">0</div>
        </div>
        <div class="stat-card warning">
            <div class="summary-label">
                <span class="status-dot status-paused"></span> PAUSED
            </div>
            <div class="summary-value" id="paused-count">0</div>
        </div>
        <div class="stat-card danger">
            <div class="summary-label">
                <span class="status-dot status-down"></span> DOWN
            </div>
            <div class="summary-value" id="down-count">0</div>
        </div>
        <div class="stat-card info">
            <div class="summary-label">
                <span class="status-dot status-starting"></span> STARTING
            </div>
            <div class="summary-value" id="starting-count">0</div>
        </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ instances -->
    <div class="instances-table-container" id="table-container">
        <table class="instances-table" id="instances-table">
            <thead>
                <tr>
                    <th>Instance ID</th>
                    <th>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</th>
                    <th>IP –ê–¥—Ä–µ—Å</th>
                    <th>–ü–æ—Ä—Ç</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–ú–∞–ø–ø–∏–Ω–≥</th>
                    <th>Last Heartbeat</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody id="instances-tbody">
                <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö -->
    <div class="empty-message" id="empty-message" style="display: none;">
        <div class="empty-icon">üîç</div>
        <h3>–ù–µ—Ç Eureka instances</h3>
        <p>–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —á–µ–∫–±–æ–∫—Å "–£–∑–µ–ª Eureka" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–µ—Ä–≤–µ—Ä–∞, –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ Eureka server –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ API –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é.</p>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è log level -->
<div class="modal" id="loglevel-modal" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="loglevel-modal-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Log Level</h3>
            <button class="modal-close" onclick="closeLoglevelModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="logger-name">Logger Name:</label>
                <input type="text" id="logger-name" class="form-control" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: com.example.service">
            </div>
            <div class="form-group">
                <label for="log-level-select">Log Level:</label>
                <select id="log-level-select" class="form-control">
                    <option value="TRACE">TRACE</option>
                    <option value="DEBUG">DEBUG</option>
                    <option value="INFO" selected>INFO</option>
                    <option value="WARN">WARN</option>
                    <option value="ERROR">ERROR</option>
                </select>
            </div>
            <div class="form-group">
                <label for="duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                <input type="number" id="duration" class="form-control" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è" min="1">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeLoglevelModal()">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" onclick="applyLoglevel()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è Eureka -->
<script src="{{ url_for('static', filename='js/eureka/api.js') }}"></script>
<script src="{{ url_for('static', filename='js/eureka/ui.js') }}"></script>
<script src="{{ url_for('static', filename='js/eureka/filters.js') }}"></script>
<script src="{{ url_for('static', filename='js/eureka/manager.js') }}"></script>
{% endblock %}
