{% extends "base.html" %}

{% block title %}–û—Ç—á—ë—Ç—ã | Faktura Apps{% endblock %}

{% block page_title %}–û—Ç—á—ë—Ç—ã{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modules/reports.css') }}">
{% endblock %}

{% block content %}
<div class="reports-container">
    <!-- –¢–∞–±—ã –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤ -->
    <div class="reports-tabs">
        <button class="tab-btn active" data-tab="current-versions">
            –¢–µ–∫—É—â–∏–µ –≤–µ—Ä—Å–∏–∏
        </button>
        <button class="tab-btn" data-tab="version-history">
            –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
        </button>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
    <div class="filters-panel">
        <div class="filter-group">
            <label for="server-filter">–°–µ—Ä–≤–µ—Ä—ã:</label>
            <select id="server-filter" multiple class="filter-select">
                <!-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </select>
        </div>

        <div class="filter-group">
            <label for="catalog-filter">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</label>
            <select id="catalog-filter" multiple class="filter-select">
                <!-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </select>
        </div>

        <div class="filter-group date-filter-group" id="date-filter-group" style="display: none;">
            <label>–ü–µ—Ä–∏–æ–¥:</label>
            <div class="date-inputs">
                <input type="date" id="date-from" class="date-input">
                <span class="date-separator">‚Äî</span>
                <input type="date" id="date-to" class="date-input">
            </div>
        </div>

        <div class="filter-actions">
            <button id="apply-filters-btn" class="action-btn primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            <button id="clear-filters-btn" class="action-btn secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
    <div class="toolbar-panel">
        <div class="display-options">
            <label class="checkbox-label">
                <input type="checkbox" id="group-by-server">
                <span>–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º</span>
            </label>
        </div>
        <div class="export-buttons">
            <button id="export-csv-btn" class="export-btn">
                <span class="export-icon">üìÑ</span> CSV
            </button>
            <button id="export-json-btn" class="export-btn">
                <span class="export-icon">üìã</span> JSON
            </button>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç—á—ë—Ç–∞ "–¢–µ–∫—É—â–∏–µ –≤–µ—Ä—Å–∏–∏" -->
    <div id="current-versions-tab" class="tab-content active">
        <div class="report-table-container">
            <table class="report-table" id="current-versions-table">
                <thead>
                    <tr>
                        <th class="col-name sortable" data-sort="name">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <span class="sort-icon"></span></th>
                        <th class="col-type">–¢–∏–ø</th>
                        <th class="col-server sortable" data-sort="server">–°–µ—Ä–≤–µ—Ä <span class="sort-icon"></span></th>
                        <th class="col-version">–í–µ—Ä—Å–∏—è</th>
                        <th class="col-date sortable" data-sort="updated">–û–±–Ω–æ–≤–ª–µ–Ω–æ <span class="sort-icon"></span></th>
                    </tr>
                </thead>
                <tbody id="current-versions-body">
                    <!-- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </tbody>
            </table>
        </div>
        <div class="table-info" id="current-versions-info"></div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç—á—ë—Ç–∞ "–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π" -->
    <div id="version-history-tab" class="tab-content" style="display: none;">
        <div class="report-table-container">
            <table class="report-table" id="version-history-table">
                <thead>
                    <tr>
                        <th class="col-name sortable" data-sort="name">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <span class="sort-icon"></span></th>
                        <th class="col-server sortable" data-sort="server">–°–µ—Ä–≤–µ—Ä <span class="sort-icon"></span></th>
                        <th class="col-version">–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è</th>
                        <th class="col-version">–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è</th>
                        <th class="col-date sortable" data-sort="changed_at">–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è <span class="sort-icon"></span></th>
                        <th class="col-source">–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                    </tr>
                </thead>
                <tbody id="version-history-body">
                    <!-- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </tbody>
            </table>
        </div>
        <div class="table-info" id="version-history-info"></div>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <div class="spinner"></div>
        <span>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö -->
    <div id="no-data-message" class="no-data-message" style="display: none;">
        <span class="no-data-icon">üì≠</span>
        <span>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script src="{{ url_for('static', filename='js/reports/reports.js') }}"></script>
{% endblock %}
