{% extends "base.html" %}

{% block title %}Faktura Apps - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è{% endblock %}

{% block page_title %}–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è{% endblock %}

{% block content %}
<div class="cluster-info">
    <div class="server-dropdown">
        <button class="dropdown-button" id="server-selected">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä <span>‚ñæ</span></button>
        <div class="dropdown-content" id="server-list">
            <a href="#" data-server-id="all">–í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã</a>
            <!-- –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>
    
    <hr>
    
<div class="search-container">
    <div class="search-bar">
        <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" id="search-input" class="search-input">
        <span class="search-icon">üîç</span>
    </div>
    <div class="controls-container">
        <button id="tag-filter-toggle" class="group-btn" title="–§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–≥–∞–º">
            üè∑Ô∏è –¢–µ–≥–∏
        </button>
        <button id="group-toggle-btn" class="group-btn active" title="–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å">
            <span id="group-icon"></span> –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button id="refresh-btn" class="refresh-btn" title="–û–±–Ω–æ–≤–∏—Ç—å">‚ü≥</button>
    </div>
</div>

<!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–µ–≥–∞–º -->
<div class="tag-filter-section" id="tag-filter-section" style="display: none;">
    <div class="tag-filter-controls" style="margin-bottom: 10px;">
        <label style="margin-right: 15px;">
            <input type="radio" name="tag-operator" value="OR" checked>
            –õ—é–±–æ–π –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
        </label>
        <label>
            <input type="radio" name="tag-operator" value="AND">
            –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
        </label>
    </div>
    <div id="tag-filter-checkboxes" class="tags-container">
        <!-- –ß–µ–∫–±–æ–∫—Å—ã —Ç–µ–≥–æ–≤ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
    <div class="tag-filter-actions">
        <button class="action-btn" id="apply-tag-filter">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        <button class="action-btn" id="clear-tag-filter" style="background: #666;">–û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>
</div>
    
    <div class="action-buttons">
        <button class="action-btn start" id="start-btn">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <button class="action-btn restart" id="restart-btn">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <button class="action-btn stop" id="stop-btn">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button class="action-btn" id="update-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
        <button class="action-btn" id="unload-btn">–°–Ω—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É</button>
        <button class="action-btn" id="batch-tags-btn" title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏">üè∑Ô∏è –¢–µ–≥–∏</button>
    </div>
    
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>
                        <div class="header-checkbox-container">
                            <label class="custom-checkbox">
                                <input type="checkbox" id="select-all">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </th>
                    <th class="sortable" data-sort="name">–ò–º—è —Å–µ—Ä–≤–∏—Å–∞</th>
                    <th>–í–µ—Ä—Å–∏—è</th>
                    <th class="sortable" data-sort="state">–°—Ç–∞—Ç—É—Å</th>
                    <th>–°–µ—Ä–≤–µ—Ä</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody id="applications-table-body">
                <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </tbody>
        </table>
    </div>
    
    <div class="pagination">
        <div class="page-size">
            <span>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å</span>
            <select class="page-select" id="page-size-select">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
        <div class="page-nav" id="pagination-controls">
            <div class="page-number">1</div>
            <button class="nav-btn prev-page" disabled>‚óÄ</button>
            <button class="nav-btn next-page">‚ñ∂</button>
        </div>
    </div>
</div>

<!-- –®–∞–±–ª–æ–Ω –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω -->
<template id="update-modal-template">
    <div class="modal-tabs" id="update-tabs">
        <!-- –í–∫–ª–∞–¥–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π -->
    </div>
    <form id="update-form" class="modal-form">
        <div class="form-group">
            <label for="distr-url">URL –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞:</label>
            <input type="text" id="distr-url" name="distr-url" class="form-control" required>
        </div>
        <div class="form-group">
            <label>–†–µ–∂–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:</label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="restart-mode" value="restart" checked> –í —Ä–µ—Å—Ç–∞—Ä—Ç
                </label>
                <label class="radio-label">
                    <input type="radio" name="restart-mode" value="immediate"> –°–µ–π—á–∞—Å
                </label>
            </div>
        </div>
        <div class="form-actions">
            <button type="button" class="cancel-btn" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            <button type="submit" class="submit-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
    </form>
</template>

<template id="confirm-action-modal-template">
    <p class="confirmation-text">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ <span class="action-name"></span> –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</p>
    <div class="app-list"></div>
    <div class="form-actions">
        <button type="button" class="cancel-btn" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="confirm-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>
</template>

<template id="batch-tags-modal-template">
    <div class="batch-tags-container">
        <p class="batch-tags-info">–í—ã–±—Ä–∞–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: <span class="selected-count"></span></p>
        <div class="form-group">
            <label>–û–ø–µ—Ä–∞—Ü–∏—è:</label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="tag-operation" value="add" checked> –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥–∏
                </label>
                <label class="radio-label">
                    <input type="radio" name="tag-operation" value="remove"> –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥–∏
                </label>
            </div>
        </div>
        <div class="form-group">
            <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏:</label>
            <div class="batch-tags-checkboxes"></div>
        </div>
        <div class="form-actions">
            <button type="button" class="cancel-btn" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="submit-btn" id="apply-batch-tags">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
    </div>
</template>

<template id="app-info-modal-template">
    <div class="app-info-container">
        <div class="app-info-section">
            <h4>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
            <table class="info-table">
                <tr>
                    <td class="info-label">–ò–º—è:</td>
                    <td class="app-name"></td>
                </tr>
                <tr>
                    <td class="info-label">–¢–∏–ø:</td>
                    <td class="app-type"></td>
                </tr>
                <tr>
                    <td class="info-label">–°—Ç–∞—Ç—É—Å:</td>
                    <td class="app-status"></td>
                </tr>
                <tr>
                    <td class="info-label">–í–µ—Ä—Å–∏—è:</td>
                    <td class="app-version"></td>
                </tr>
                <tr>
                    <td class="info-label">–°–µ—Ä–≤–µ—Ä:</td>
                    <td class="app-server"></td>
                </tr>
                <tr>
                    <td class="info-label">IP:</td>
                    <td class="app-ip"></td>
                </tr>
                <tr>
                    <td class="info-label">–ü–æ—Ä—Ç:</td>
                    <td class="app-port"></td>
                </tr>
            </table>
        </div>
        
        <div class="app-info-section">
            <h4>–ü—É—Ç–∏ –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h4>
            <table class="info-table">
                <tr>
                    <td class="info-label">–ü—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</td>
                    <td class="app-path"></td>
                </tr>
                <tr>
                    <td class="info-label">–ü—É—Ç—å –∫ –ª–æ–≥–∞–º:</td>
                    <td class="app-log-path"></td>
                </tr>
                <tr>
                    <td class="info-label">–ü—É—Ç—å –∫ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—É:</td>
                    <td class="app-distr-path"></td>
                </tr>
            </table>
        </div>
        
        <div class="app-info-section">
            <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</h4>
            <div class="form-group">
                <label for="update-playbook-path">–ü—É—Ç—å –∫ Ansible playbook:</label>
                <div class="input-with-button">
                    <input type="text" id="update-playbook-path" class="form-control app-playbook-path">
                    <button type="button" id="save-playbook-path" class="action-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
        
        <div class="app-info-section">
            <h4>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</h4>
            <div class="events-list"></div>
        </div>
    </div>
</template>
{% endblock %}

{% block page_scripts %}
<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π -->
<script src="{{ url_for('static', filename='js/applications/applications.js') }}"></script>
{% endblock %}
