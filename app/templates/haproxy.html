{% extends "base.html" %}

{% block title %}Faktura Apps - HAProxy{% endblock %}

{% block page_title %}HAProxy –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/haproxy.css') }}">
{% endblock %}

{% block content %}
<div class="haproxy-container">
    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
    <div class="controls-panel">
        <div class="filters-section">
            <div class="filter-group">
                <label>–ò–Ω—Å—Ç–∞–Ω—Å HAProxy:</label>
                <div class="select-container">
                    <select id="instance-filter" class="filter-select">
                        <option value="">–í—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã</option>
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <div class="filter-group">
                <label>–°—Ç–∞—Ç—É—Å:</label>
                <div class="select-container">
                    <select id="status-filter" class="filter-select">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        <option value="UP">UP</option>
                        <option value="DOWN">DOWN</option>
                        <option value="MAINT">MAINT</option>
                        <option value="DRAIN">DRAIN</option>
                    </select>
                    <span class="select-arrow">‚ñº</span>
                </div>
            </div>

            <div class="search-group">
                <input type="text" id="search-input" class="search-input" placeholder="–ü–æ–∏—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞...">
                <span class="search-icon">üîç</span>
            </div>
        </div>

        <div class="action-buttons">
            <button id="refresh-btn" class="action-btn primary-btn" title="–û–±–Ω–æ–≤–∏—Ç—å">
                <span class="refresh-icon">‚Üª</span> –û–±–Ω–æ–≤–∏—Ç—å
            </button>
            <button id="expand-all-btn" class="action-btn secondary-btn">
                –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ
            </button>
            <button id="collapse-all-btn" class="action-btn secondary-btn">
                –°–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ
            </button>
        </div>
    </div>

    <!-- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="global-stats">
        <div class="stat-card">
            <div class="summary-label">–í—Å–µ–≥–æ –±—ç–∫–µ–Ω–¥–æ–≤</div>
            <div class="summary-value" id="total-backends">0</div>
        </div>
        <div class="stat-card">
            <div class="summary-label">–í—Å–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–æ–≤</div>
            <div class="summary-value" id="total-servers">0</div>
        </div>
        <div class="stat-card success">
            <div class="summary-label">
                <span class="status-dot status-up"></span> UP
            </div>
            <div class="summary-value" id="up-count">0</div>
        </div>
        <div class="stat-card warning">
            <div class="summary-label">
                <span class="status-dot status-drain"></span> DRAIN
            </div>
            <div class="summary-value" id="drain-count">0</div>
        </div>
        <div class="stat-card alert">
            <div class="summary-label">
                <span class="status-dot status-maint"></span> MAINT
            </div>
            <div class="summary-value" id="maint-count">0</div>
        </div>
        <div class="stat-card danger">
            <div class="summary-label">
                <span class="status-dot status-down"></span> DOWN
            </div>
            <div class="summary-value" id="down-count">0</div>
        </div>
    </div>

    <!-- Quick Actions Panel (—Å–∫—Ä—ã—Ç–∞, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ) -->
    <div class="quick-actions-panel" id="quick-actions" style="display: none;">
        <div class="quick-actions-header">
            <span>–í—ã–±—Ä–∞–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–≤: <strong id="selected-count">0</strong></span>
            <button id="clear-selection-btn" class="text-btn">–°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä</button>
        </div>
        <div class="quick-actions-buttons">
            <!-- –í–ê–ñ–ù–û: –ö–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã –≤ –§–∞–∑–µ 1 (—Ç–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥) -->
            <button class="quick-action-btn ready-btn" data-action="ready" disabled title="–ë—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –§–∞–∑–µ 2">
                <span class="icon">‚úì</span> Ready
            </button>
            <button class="quick-action-btn drain-btn" data-action="drain" disabled title="–ë—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –§–∞–∑–µ 2">
                <span class="icon">‚è∏</span> Drain
            </button>
            <button class="quick-action-btn maint-btn" data-action="maint" disabled title="–ë—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –§–∞–∑–µ 2">
                <span class="icon">üîß</span> Maint
            </button>
        </div>
    </div>

    <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã —Å –±—ç–∫–µ–Ω–¥–∞–º–∏ -->
    <div class="backends-accordion" id="backends-container">
        <div class="loading-message">
            <span class="loading-spinner">‚ü≥</span>
            –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö HAProxy...
        </div>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö -->
    <div class="empty-message" id="empty-message" style="display: none;">
        <div class="empty-icon">üìä</div>
        <h3>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
        <p>–ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å" –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö HAProxy –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.</p>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è HAProxy -->
<script src="{{ url_for('static', filename='js/haproxy/api.js') }}"></script>
<script src="{{ url_for('static', filename='js/haproxy/ui.js') }}"></script>
<script src="{{ url_for('static', filename='js/haproxy/filters.js') }}"></script>
<script src="{{ url_for('static', filename='js/haproxy/manager.js') }}"></script>
{% endblock %}
