# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∞–ª–∏–∞—Å–æ–≤ —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-17
**–°—Ç–∞—Ç—É—Å**: üìã –ü–õ–ê–ù –†–ê–ó–†–ê–ë–û–¢–ê–ù
**–í–µ—Ä—Å–∏—è**: 1.0

---

## –û–±–∑–æ—Ä —Ç–µ–∫—É—â–∏—Ö –∞–ª–∏–∞—Å–æ–≤

### –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–∏–∞—Å—ã, —Ç—Ä–µ–±—É—é—â–∏–µ —É–¥–∞–ª–µ–Ω–∏—è:

1. **`Application = ApplicationInstance`** - –∫–ª–∞—Å—Å-–∞–ª–∏–∞—Å (11 —Ñ–∞–π–ª–æ–≤, ~100+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)
2. **`app.name`** - @property –∞–ª–∏–∞—Å (23 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
3. **`app.group_name`** - @property –∞–ª–∏–∞—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è frontend)
4. **`app.update_playbook_path`** - @property –∞–ª–∏–∞—Å (1 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ + –≥—Ä—É–ø–ø—ã)

---

## –≠–¢–ê–ü 1: –ó–∞–º–µ–Ω–∞ `app.name` ‚Üí `app.instance_name`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô
### –°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–ò–ó–ö–ê–Ø
### –†–∏—Å–∫: –ù–ò–ó–ö–ò–ô
### –í—Ä–µ–º—è: 30-45 –º–∏–Ω—É—Ç

### 1.1. –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è (23 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è):

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|------|--------|------------|
| `app/api/applications_routes.py` | 44, 95, 204, 350, 352, 363, 462, 477, 533, 551, 594 | 11 |
| `app/api/app_groups_routes.py` | 115, 226, 499, 652 | 4 |
| `app/api/nexus_routes.py` | 299, 319, 326, 358, 378 | 5 |
| `app/api/ansible_routes.py` | 210, 294 | 2 |
| `app/api/servers_routes.py` | 224 | 1 |

### 1.2. –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

```bash
# 1. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
cp -r app/api app/api.backup_before_name_refactor

# 2. –ó–∞–º–µ–Ω–∞ –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ
# –ü–∞—Ç—Ç–µ—Ä–Ω –∑–∞–º–µ–Ω—ã: app.name ‚Üí app.instance_name
# –í–ê–ñ–ù–û: –ù–ï –∑–∞–º–µ–Ω—è—Ç—å group.name!
```

### 1.3. –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —Ñ–∞–π–ª–∞–º:

#### applications_routes.py
```python
# –°—Ç—Ä–æ–∫–∞ 44
- 'name': app.name,
+ 'name': app.instance_name,

# –°—Ç—Ä–æ–∫–∞ 95
- 'name': app.name,
+ 'name': app.instance_name,

# –°—Ç—Ä–æ–∫–∞ 204
- logger.info(f"–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è {app.name} –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ {app.server.name}")
+ logger.info(f"–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è {app.instance_name} –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ {app.server.name}")

# –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫...
```

### 1.4. –ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã:

1. –£–¥–∞–ª–∏—Ç—å @property –∏–∑ `app/models/application_instance.py`:
```python
# –£–î–ê–õ–ò–¢–¨ —Å—Ç—Ä–æ–∫–∏ 122-125:
@property
def name(self):
    """–ê–ª–∏–∞—Å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –∫–æ–¥–æ–º, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º app.name"""
    return self.instance_name
```

2. –û–±–Ω–æ–≤–∏—Ç—å `to_dict()` –º–µ—Ç–æ–¥ –≤ ApplicationInstance (—Å—Ç—Ä–æ–∫–∞ 226):
```python
# –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:
- 'name': self.instance_name,  # –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```

---

## –≠–¢–ê–ü 2: –ó–∞–º–µ–Ω–∞ `app.update_playbook_path` ‚Üí `app.get_effective_playbook_path()`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô
### –°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–ò–ó–ö–ê–Ø
### –†–∏—Å–∫: –ù–ò–ó–ö–ò–ô
### –í—Ä–µ–º—è: 15 –º–∏–Ω—É—Ç

### 2.1. –§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|--------|---------------|
| `app/api/applications_routes.py` | 103 | `'update_playbook_path': app.update_playbook_path,` |

### 2.2. –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

```python
# applications_routes.py, —Å—Ç—Ä–æ–∫–∞ 103
- 'update_playbook_path': app.update_playbook_path,
+ 'update_playbook_path': app.get_effective_playbook_path(),
```

### 2.3. –ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã:

–£–¥–∞–ª–∏—Ç—å @property –∏–∑ `app/models/application_instance.py`:
```python
# –£–î–ê–õ–ò–¢–¨ —Å—Ç—Ä–æ–∫–∏ 127-130:
@property
def update_playbook_path(self):
    """–ê–ª–∏–∞—Å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å –∫ playbook"""
    return self.get_effective_playbook_path()
```

### 2.4. –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ:

‚ö†Ô∏è –ù–ï –¢–†–û–ì–ê–¢–¨ `group.update_playbook_path` –≤ ApplicationGroup - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ –∞–ª–∏–∞—Å!

---

## –≠–¢–ê–ü 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `app.group_name` –¥–ª—è frontend

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô
### –°–ª–æ–∂–Ω–æ—Å—Ç—å: –°–†–ï–î–ù–Ø–Ø
### –†–∏—Å–∫: –°–†–ï–î–ù–ò–ô (–∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç frontend)
### –í—Ä–µ–º—è: 1-2 —á–∞—Å–∞

### 3.1. –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

Frontend –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª–µ `group_name` –≤ JSON –æ—Ç–≤–µ—Ç–∞—Ö –æ—Ç API.

### 3.2. –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ –ø–æ–ª–µ –≤ to_dict() (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```python
# app/models/application_instance.py, –º–µ—Ç–æ–¥ to_dict()
def to_dict(self, include_group=False, include_settings=False):
    result = {
        'id': self.id,
        'instance_name': self.instance_name,
        # –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ group_name
        'group_name': self.group.name if self.group else None,
        # ...
    }
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –û–±–Ω–æ–≤–∏—Ç—å frontend –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

```javascript
// –í–º–µ—Å—Ç–æ: app.group_name
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: app.group ? app.group.name : null
```

### 3.3. –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (–í–∞—Ä–∏–∞–Ω—Ç A):

1. –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –≤ API, –≥–¥–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è ApplicationInstance.to_dict()
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `group_name` –≤–∫–ª—é—á–µ–Ω –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
3. –£–¥–∞–ª–∏—Ç—å @property –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 3.4. –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

–£–¥–∞–ª–∏—Ç—å @property –∏–∑ `app/models/application_instance.py`:
```python
# –£–î–ê–õ–ò–¢–¨ —Å—Ç—Ä–æ–∫–∏ 274-279:
@property
def group_name(self):
    """–ü–æ–ª—É—á–∏—Ç—å –∏–º—è –≥—Ä—É–ø–ø—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    if self.group:
        return self.group.name
    return self.base_name  # –≠—Ç–æ—Ç base_name —É–∂–µ —É–¥–∞–ª–µ–Ω!
```

---

## –≠–¢–ê–ü 4: –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å-–∞–ª–∏–∞—Å–∞ `Application = ApplicationInstance`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø)
### –°–ª–æ–∂–Ω–æ—Å—Ç—å: –í–´–°–û–ö–ê–Ø
### –†–∏—Å–∫: –í–´–°–û–ö–ò–ô
### –í—Ä–µ–º—è: 3-4 —á–∞—Å–∞

### 4.1. –§–∞–π–ª—ã —Å –∞–ª–∏–∞—Å–æ–º (11 —Ñ–∞–π–ª–æ–≤):

1. `app/models/__init__.py` - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
2. `app/api/applications_routes.py`
3. `app/api/artifacts_routes.py`
4. `app/api/app_groups_routes.py`
5. `app/api/tasks_routes.py`
6. `app/api/servers_routes.py`
7. `app/api/nexus_routes.py`
8. `app/api/ansible_routes.py`
9. `app/services/agent_service.py`
10. `app/services/haproxy_mapper.py`
11. `app/services/eureka_mapper.py`

### 4.2. –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

#### –®–∞–≥ 1: –ó–∞–º–µ–Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

```python
# –ë–´–õ–û:
from app.models import Application
# –∏–ª–∏
Application = ApplicationInstance

# –°–¢–ê–õ–û:
from app.models import ApplicationInstance
```

#### –®–∞–≥ 2: –ó–∞–º–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ

```python
# –ë–´–õ–û:
app = Application.query.get(app_id)
apps = Application.query.filter_by(server_id=server_id).all()

# –°–¢–ê–õ–û:
app = ApplicationInstance.query.get(app_id)
apps = ApplicationInstance.query.filter_by(server_id=server_id).all()
```

### 4.3. –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ–Ω –ø–æ —Ñ–∞–π–ª–∞–º:

#### app/models/__init__.py
```python
# –°—Ç—Ä–æ–∫–∞ 13 - –£–î–ê–õ–ò–¢–¨:
- Application = ApplicationInstance  # –ê–ª–∏–∞—Å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

# –°—Ç—Ä–æ–∫–∞ 21 - –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç:
- __all__ = ['db', 'Server', 'Application', 'ApplicationInstance', ...]
+ __all__ = ['db', 'Server', 'ApplicationInstance', ...]
```

#### app/api/applications_routes.py
```python
# –°—Ç—Ä–æ–∫–∞ 14:
- from app.models import Server, Application, ApplicationInstance, ApplicationGroup
+ from app.models import Server, ApplicationInstance, ApplicationGroup

# –í—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Application –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ ApplicationInstance
# –ü—Ä–∏–º–µ—Ä–Ω–æ 20-30 –∑–∞–º–µ–Ω
```

### 4.4. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–º–µ–Ω—ã:

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∑–∞–º–µ–Ω—ã
#!/bin/bash

# 1. –ó–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
find app/ -name "*.py" -type f -exec sed -i 's/from app.models import.*Application[,\s]/from app.models import ApplicationInstance/g' {} \;

# 2. –ó–∞–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
find app/ -name "*.py" -type f -exec sed -i 's/\bApplication\./ApplicationInstance./g' {} \;
find app/ -name "*.py" -type f -exec sed -i 's/\bApplication(/ApplicationInstance(/g' {} \;

# 3. –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å –∞–ª–∏–∞—Å–æ–º
find app/ -name "*.py" -type f -exec sed -i '/^Application = ApplicationInstance/d' {} \;
```

---

## –≠–¢–ê–ü 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
### –í—Ä–µ–º—è: 1-2 —á–∞—Å–∞

### 5.1. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
   ```bash
   docker restart fak-apps
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏**
   ```bash
   docker logs fak-apps --tail 100
   ```

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
   - –î–µ—Ç–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### 5.2. –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

#### API endpoints –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# 1. –°–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
curl http://localhost:5000/api/applications

# 2. –î–µ—Ç–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:5000/api/applications/{id}

# 3. –ì—Ä—É–ø–ø—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
curl http://localhost:5000/api/application-groups

# 4. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
curl http://localhost:5000/api/applications/{id}/artifacts
```

#### Frontend —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
2. –î–µ—Ç–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å group_name)
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏
5. –ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```mermaid
graph LR
    A[–≠–¢–ê–ü 1: app.name] --> B[–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    B --> C[–≠–¢–ê–ü 2: update_playbook_path]
    C --> D[–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    D --> E[–≠–¢–ê–ü 3: group_name]
    E --> F[–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    F --> G[–≠–¢–ê–ü 4: Application alias]
    G --> H[–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ]
    H --> I[–ì–æ—Ç–æ–≤–æ!]
```

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏:

| –≠—Ç–∞–ø | –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | –í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | –ò—Ç–æ–≥–æ |
|------|------------------|-------------------|--------|
| –≠–¢–ê–ü 1 | 30-45 –º–∏–Ω | 15 –º–∏–Ω | 1 —á–∞—Å |
| –≠–¢–ê–ü 2 | 15 –º–∏–Ω | 10 –º–∏–Ω | 25 –º–∏–Ω |
| –≠–¢–ê–ü 3 | 1-2 —á–∞—Å–∞ | 30 –º–∏–Ω | 2.5 —á–∞—Å–∞ |
| –≠–¢–ê–ü 4 | 3-4 —á–∞—Å–∞ | 1 —á–∞—Å | 5 —á–∞—Å–æ–≤ |
| –≠–¢–ê–ü 5 | - | 1-2 —á–∞—Å–∞ | 2 —á–∞—Å–∞ |
| **–ò–¢–û–ì–û** | | | **~11 —á–∞—Å–æ–≤** |

---

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç:

1. **–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –∫–æ–¥–∞**
   ```bash
   tar -czf app_backup_$(date +%Y%m%d_%H%M%S).tar.gz app/
   ```

2. **–°–æ–∑–¥–∞—Ç—å —Ç–æ—á–∫—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ git**
   ```bash
   git add -A
   git commit -m "Backup before alias removal refactoring"
   git tag backup-before-alias-removal
   ```

3. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –ë–î**
   ```bash
   docker exec fak-postgres pg_dump -U fappcontrol -s fappcontrol > schema_backup.sql
   ```

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ù–∞—Ä—É—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã frontend
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≠–¢–ê–ü–ê 3

### –†–∏—Å–∫ 2: –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Application
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å grep –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–π –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

### –†–∏—Å–∫ 3: –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

### –†–∏—Å–∫ 4: –û—à–∏–±–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ dev/staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
- [ ] –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
- [ ] –°–æ–∑–¥–∞–Ω–∞ git —Ç–æ—á–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### –ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 1:
- [ ] –í—Å–µ 23 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è app.name –∑–∞–º–µ–Ω–µ–Ω—ã
- [ ] @property name —É–¥–∞–ª–µ–Ω
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

### –ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 2:
- [ ] update_playbook_path –∑–∞–º–µ–Ω–µ–Ω
- [ ] @property —É–¥–∞–ª–µ–Ω
- [ ] Playbook –ø—É—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è

### –ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 3:
- [ ] group_name –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ API
- [ ] Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º–µ–Ω–∞ –≥—Ä—É–ø–ø
- [ ] @property —É–¥–∞–ª–µ–Ω

### –ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 4:
- [ ] –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –í—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Application –∑–∞–º–µ–Ω–µ–Ω—ã
- [ ] –ê–ª–∏–∞—Å —É–¥–∞–ª–µ–Ω –∏–∑ __init__.py
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
- [ ] –ü–æ–ª–Ω–æ–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ git
- [ ] –°–æ–∑–¥–∞–Ω PR –¥–ª—è review

---

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

1. **–£–¥–∞–ª–µ–Ω–æ –∞–ª–∏–∞—Å–æ–≤**: 4
2. **–£–¥–∞–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~50-60
3. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ApplicationInstance
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –∞–ª–∏–∞—Å–æ–≤ –∏ @property
5. **–°–Ω–∏–∂–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞**: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ—Ç —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:

- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π)

–ï—Å–ª–∏ –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–ª–∏—à–∫–æ–º —Ä–∏—Å–∫–æ–≤–∞–Ω, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –≠–¢–ê–ü–´ 1-2:

1. **–£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ @property**
2. **–û—Å—Ç–∞–≤–∏—Ç—å Application –∞–ª–∏–∞—Å** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∞–ª–∏–∞—Å—ã

**–í—ã–≥–æ–¥–∞**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫, —á–∞—Å—Ç–∏—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –æ—Å—Ç–∞–µ—Ç—Å—è

---

## –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
./create_backup.sh

# 2. –ù–∞—á–∞—Ç—å —Å –≠–¢–ê–ü–ê 1
python refactor_stage1.py

# 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
./run_tests.sh

# 4. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ —É–¥–∞–ª–µ–Ω–∏—é –≤—Å–µ—Ö –∞–ª–∏–∞—Å–æ–≤ –æ—Ç —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö. –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í—ã–ø–æ–ª–Ω—è—Ç—å –≤ —Å–ø–æ–∫–æ–π–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–≤—ã—Ö–æ–¥–Ω—ã–µ/–Ω–æ—á—å), –Ω–∞—á–∞—Ç—å —Å dev –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–î–∞—Ç–∞**: 2025-11-17
**–í–µ—Ä—Å–∏—è**: 1.0