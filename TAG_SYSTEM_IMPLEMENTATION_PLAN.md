# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã —Ç—ç–≥–æ–≤ –¥–ª—è Application Control

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–∫–æ–Ω—Ç–µ–∫—Å—Ç-–∏-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
3. [–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —Ñ–∞–∑–∞–º](#–¥–µ—Ç–∞–ª—å–Ω—ã–π-–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏-–ø–æ-—Ñ–∞–∑–∞–º)
4. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)
5. [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
6. [–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ-—Ç–æ—á–∫–∏-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ò—Å—Ö–æ–¥–Ω–∞—è –∑–∞–¥–∞—á–∞
–î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ç—ç–≥–æ–≤ –¥–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –ø—Ä–æ–µ–∫—Ç **AC (Application Control)** - Flask-based –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. **–£—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**: ApplicationInstance + ApplicationGroup
2. **–ü–æ–¥—Ö–æ–¥ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: –ì–∏–±—Ä–∏–¥–Ω—ã–π (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã + –∫—ç—à)
3. **–í–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ Batch –æ–ø–µ—Ä–∞—Ü–∏–∏
4. **UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
5. **–î–∏–∑–∞–π–Ω**: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ç—ç–≥–∏ —Å –æ–±–≤–æ–¥–∫–æ–π (tag_design_option2.html)
6. **–†–∞–∑–º–µ—â–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ settings –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –±–ª–æ–∫–µ

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
ApplicationCatalog ‚Üí ApplicationGroup ‚Üí ApplicationInstance ‚Üí Server
                                    ‚Üì
                                  Event
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ö—ç—à –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **Many-to-Many —Å–≤—è–∑–∏** —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

### –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ç—ç–≥–æ–≤
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(64) UNIQUE NOT NULL,      -- —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (online, offline, production)
    display_name VARCHAR(64),              -- –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è (Online, Offline, Production)
    description TEXT,                      -- –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    icon VARCHAR(20),                      -- emoji –∏–∫–æ–Ω–∫–∞ (‚óè, ‚úì, ‚ö†, üè¢, üß™, etc)
    tag_type VARCHAR(20),                  -- –∫–∞—Ç–µ–≥–æ—Ä–∏—è (status, env, version, special)
    css_class VARCHAR(50),                 -- CSS –∫–ª–∞—Å—Å –∏–∑ –¥–∏–∑–∞–π–Ω–∞
    border_color VARCHAR(7),               -- HEX —Ü–≤–µ—Ç –æ–±–≤–æ–¥–∫–∏
    text_color VARCHAR(7),                 -- HEX —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- –°–≤—è–∑—å —Å ApplicationInstance
CREATE TABLE application_instance_tags (
    id SERIAL PRIMARY KEY,
    application_id INT NOT NULL REFERENCES application_instances(id) ON DELETE CASCADE,
    tag_id INT NOT NULL REFERENCES tags(id) ON DELETE CASCADE,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by VARCHAR(64),
    UNIQUE(application_id, tag_id),
    INDEX idx_app_tags_app (application_id),
    INDEX idx_app_tags_tag (tag_id)
);

-- –°–≤—è–∑—å —Å ApplicationGroup
CREATE TABLE application_group_tags (
    id SERIAL PRIMARY KEY,
    group_id INT NOT NULL REFERENCES application_groups(id) ON DELETE CASCADE,
    tag_id INT NOT NULL REFERENCES tags(id) ON DELETE CASCADE,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by VARCHAR(64),
    UNIQUE(group_id, tag_id),
    INDEX idx_group_tags_group (group_id),
    INDEX idx_group_tags_tag (tag_id)
);

-- –ö—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
ALTER TABLE application_instances
    ADD COLUMN tags_cache VARCHAR(512) DEFAULT NULL,
    ADD INDEX idx_instance_tags_cache (tags_cache);

ALTER TABLE application_groups
    ADD COLUMN tags_cache VARCHAR(512) DEFAULT NULL,
    ADD INDEX idx_group_tags_cache (tags_cache);

-- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—ç–≥–æ–≤
CREATE TABLE tag_history (
    id SERIAL PRIMARY KEY,
    entity_type VARCHAR(20) NOT NULL,      -- 'instance' –∏–ª–∏ 'group'
    entity_id INT NOT NULL,
    tag_id INT,
    action VARCHAR(20) NOT NULL,           -- 'assigned', 'removed', 'updated'
    changed_by VARCHAR(64),
    changed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    details JSON,                          -- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    INDEX idx_tag_history_entity (entity_type, entity_id),
    INDEX idx_tag_history_time (changed_at)
);
```

---

## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —Ñ–∞–∑–∞–º

### –§–ê–ó–ê 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

**–ù–æ–≤—ã–π —Ñ–∞–π–ª: `app/models/tag.py`**
```python
from datetime import datetime
from app import db

class Tag(db.Model):
    __tablename__ = 'tags'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(64), unique=True, nullable=False, index=True)
    display_name = db.Column(db.String(64))
    description = db.Column(db.Text)
    icon = db.Column(db.String(20))
    tag_type = db.Column(db.String(20))  # status, env, version, special
    css_class = db.Column(db.String(50))
    border_color = db.Column(db.String(7))
    text_color = db.Column(db.String(7))
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # –°–≤—è–∑–∏ many-to-many
    instances = db.relationship(
        'ApplicationInstance',
        secondary='application_instance_tags',
        backref=db.backref('tags', lazy='dynamic'),
        lazy='dynamic'
    )

    groups = db.relationship(
        'ApplicationGroup',
        secondary='application_group_tags',
        backref=db.backref('tags', lazy='dynamic'),
        lazy='dynamic'
    )

    def to_dict(self):
        return {
            'id': self.id,
            'name': self.name,
            'display_name': self.display_name or self.name,
            'description': self.description,
            'icon': self.icon,
            'tag_type': self.tag_type,
            'css_class': self.css_class,
            'border_color': self.border_color,
            'text_color': self.text_color,
            'usage_count': self.get_usage_count(),
            'created_at': self.created_at.isoformat() if self.created_at else None
        }

    def get_usage_count(self):
        """–ü–æ–¥—Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—ç–≥–∞"""
        return self.instances.count() + self.groups.count()

class ApplicationInstanceTag(db.Model):
    __tablename__ = 'application_instance_tags'

    id = db.Column(db.Integer, primary_key=True)
    application_id = db.Column(db.Integer, db.ForeignKey('application_instances.id', ondelete='CASCADE'), nullable=False)
    tag_id = db.Column(db.Integer, db.ForeignKey('tags.id', ondelete='CASCADE'), nullable=False)
    assigned_at = db.Column(db.DateTime, default=datetime.utcnow)
    assigned_by = db.Column(db.String(64))

    __table_args__ = (
        db.UniqueConstraint('application_id', 'tag_id'),
        db.Index('idx_app_tags_app', 'application_id'),
        db.Index('idx_app_tags_tag', 'tag_id'),
    )

class ApplicationGroupTag(db.Model):
    __tablename__ = 'application_group_tags'

    id = db.Column(db.Integer, primary_key=True)
    group_id = db.Column(db.Integer, db.ForeignKey('application_groups.id', ondelete='CASCADE'), nullable=False)
    tag_id = db.Column(db.Integer, db.ForeignKey('tags.id', ondelete='CASCADE'), nullable=False)
    assigned_at = db.Column(db.DateTime, default=datetime.utcnow)
    assigned_by = db.Column(db.String(64))

    __table_args__ = (
        db.UniqueConstraint('group_id', 'tag_id'),
        db.Index('idx_group_tags_group', 'group_id'),
        db.Index('idx_group_tags_tag', 'tag_id'),
    )

class TagHistory(db.Model):
    __tablename__ = 'tag_history'

    id = db.Column(db.Integer, primary_key=True)
    entity_type = db.Column(db.String(20), nullable=False)  # 'instance', 'group'
    entity_id = db.Column(db.Integer, nullable=False)
    tag_id = db.Column(db.Integer, db.ForeignKey('tags.id'))
    action = db.Column(db.String(20), nullable=False)  # 'assigned', 'removed', 'updated'
    changed_by = db.Column(db.String(64))
    changed_at = db.Column(db.DateTime, default=datetime.utcnow)
    details = db.Column(db.JSON)

    __table_args__ = (
        db.Index('idx_tag_history_entity', 'entity_type', 'entity_id'),
        db.Index('idx_tag_history_time', 'changed_at'),
    )
```

#### 1.2 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥–µ–ª–µ–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/models/application.py`:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–ª–∞—Å—Å ApplicationInstance:

def add_tag(self, tag_name, user=None):
    """–î–æ–±–∞–≤–∏—Ç—å —Ç—ç–≥ –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É"""
    from app.models.tag import Tag, TagHistory

    tag = Tag.query.filter_by(name=tag_name).first()
    if not tag:
        tag = Tag(name=tag_name, display_name=tag_name.title())
        db.session.add(tag)

    if tag not in self.tags:
        self.tags.append(tag)
        self._update_tags_cache()

        # –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
        history = TagHistory(
            entity_type='instance',
            entity_id=self.id,
            tag_id=tag.id,
            action='assigned',
            changed_by=user,
            details={'tag_name': tag_name}
        )
        db.session.add(history)

    return tag

def remove_tag(self, tag_name, user=None):
    """–£–¥–∞–ª–∏—Ç—å —Ç—ç–≥ —É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞"""
    from app.models.tag import Tag, TagHistory

    tag = Tag.query.filter_by(name=tag_name).first()
    if tag and tag in self.tags:
        self.tags.remove(tag)
        self._update_tags_cache()

        # –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
        history = TagHistory(
            entity_type='instance',
            entity_id=self.id,
            tag_id=tag.id,
            action='removed',
            changed_by=user
        )
        db.session.add(history)

    return tag

def get_tag_names(self):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω —Ç—ç–≥–æ–≤"""
    return [t.name for t in self.tags]

def has_tags(self, tag_names):
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç—ç–≥–æ–≤"""
    my_tags = set(self.get_tag_names())
    return all(t in my_tags for t in tag_names)

def _update_tags_cache(self):
    """–û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à —Ç—ç–≥–æ–≤"""
    self.tags_cache = ','.join(sorted(self.get_tag_names()))

def to_dict(self, include_tags=True):
    result = {
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    }
    if include_tags:
        result['tags'] = [t.to_dict() for t in self.tags]
    return result
```

#### 1.3 –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ù–æ–≤—ã–π —Ñ–∞–π–ª: `migrations/versions/xxx_add_tag_system.py`**
```python
"""Add tag system

Revision ID: xxx
Revises: previous_revision
Create Date: 2024-xx-xx

"""
from alembic import op
import sqlalchemy as sa

def upgrade():
    # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã tags
    op.create_table('tags',
        sa.Column('id', sa.Integer(), nullable=False),
        sa.Column('name', sa.String(64), nullable=False),
        sa.Column('display_name', sa.String(64)),
        sa.Column('description', sa.Text()),
        sa.Column('icon', sa.String(20)),
        sa.Column('tag_type', sa.String(20)),
        sa.Column('css_class', sa.String(50)),
        sa.Column('border_color', sa.String(7)),
        sa.Column('text_color', sa.String(7)),
        sa.Column('created_at', sa.DateTime()),
        sa.Column('updated_at', sa.DateTime()),
        sa.PrimaryKeyConstraint('id'),
        sa.UniqueConstraint('name')
    )
    op.create_index('idx_tag_name', 'tags', ['name'])

    # –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü
    op.create_table('application_instance_tags',
        sa.Column('id', sa.Integer(), nullable=False),
        sa.Column('application_id', sa.Integer(), nullable=False),
        sa.Column('tag_id', sa.Integer(), nullable=False),
        sa.Column('assigned_at', sa.DateTime()),
        sa.Column('assigned_by', sa.String(64)),
        sa.ForeignKeyConstraint(['application_id'], ['application_instances.id'], ondelete='CASCADE'),
        sa.ForeignKeyConstraint(['tag_id'], ['tags.id'], ondelete='CASCADE'),
        sa.PrimaryKeyConstraint('id'),
        sa.UniqueConstraint('application_id', 'tag_id')
    )

    # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è application_group_tags –∏ tag_history ...

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à –ø–æ–ª–µ–π
    op.add_column('application_instances',
        sa.Column('tags_cache', sa.String(512)))
    op.add_column('application_groups',
        sa.Column('tags_cache', sa.String(512)))

    # –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç—ç–≥–∏
    op.execute("""
        INSERT INTO tags (name, display_name, icon, tag_type, css_class) VALUES
        ('online', 'Online', '‚óè', 'status', 'tag-status-online'),
        ('offline', 'Offline', '‚óè', 'status', 'tag-status-offline'),
        ('warning', 'Warning', '‚óè', 'status', 'tag-status-warning'),
        ('production', 'Production', 'üè¢', 'env', 'tag-env-prod'),
        ('test', 'Test', 'üß™', 'env', 'tag-env-test'),
        ('development', 'Development', 'üîß', 'env', 'tag-env-dev'),
        ('release', 'Release', '‚úì', 'version', 'tag-version-release'),
        ('snapshot', 'Snapshot', 'üì∏', 'version', 'tag-version-snapshot'),
        ('dev', 'Dev', 'üîπ', 'version', 'tag-version-dev'),
        ('critical', 'Critical', '‚ö†', 'special', 'tag-critical'),
        ('monitored', 'Monitored', 'üìä', 'special', 'tag-monitored'),
        ('deprecated', 'Deprecated', 'üóë', 'special', 'tag-deprecated')
    """)

def downgrade():
    op.drop_column('application_groups', 'tags_cache')
    op.drop_column('application_instances', 'tags_cache')
    op.drop_table('tag_history')
    op.drop_table('application_group_tags')
    op.drop_table('application_instance_tags')
    op.drop_table('tags')
```

---

### –§–ê–ó–ê 2: API Endpoints (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è —Ç—ç–≥–æ–≤

**–ù–æ–≤—ã–π —Ñ–∞–π–ª: `app/api/tags_routes.py`**
```python
from flask import Blueprint, request, jsonify
from app import db
from app.models.tag import Tag, TagHistory
from app.models.application import ApplicationInstance
from app.models.application_group import ApplicationGroup

bp = Blueprint('tags', __name__, url_prefix='/api')

@bp.route('/tags', methods=['GET'])
def get_tags():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç—ç–≥–æ–≤"""
    tags = Tag.query.all()
    return jsonify({
        'success': True,
        'tags': [tag.to_dict() for tag in tags],
        'total': len(tags)
    })

@bp.route('/tags', methods=['POST'])
def create_tag():
    """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç—ç–≥"""
    data = request.json

    # –í–∞–ª–∏–¥–∞—Ü–∏—è
    if not data.get('name'):
        return jsonify({'success': False, 'error': 'Name is required'}), 400

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
    if Tag.query.filter_by(name=data['name']).first():
        return jsonify({'success': False, 'error': 'Tag already exists'}), 409

    tag = Tag(
        name=data['name'],
        display_name=data.get('display_name', data['name'].title()),
        description=data.get('description'),
        icon=data.get('icon', '‚óè'),
        tag_type=data.get('tag_type', 'custom'),
        css_class=data.get('css_class'),
        border_color=data.get('border_color'),
        text_color=data.get('text_color')
    )

    db.session.add(tag)
    db.session.commit()

    return jsonify({
        'success': True,
        'tag': tag.to_dict()
    }), 201

@bp.route('/tags/<int:tag_id>', methods=['PUT'])
def update_tag(tag_id):
    """–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç—ç–≥"""
    tag = Tag.query.get_or_404(tag_id)
    data = request.json

    # –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è
    for field in ['display_name', 'description', 'icon', 'css_class', 'border_color', 'text_color']:
        if field in data:
            setattr(tag, field, data[field])

    db.session.commit()

    return jsonify({
        'success': True,
        'tag': tag.to_dict()
    })

@bp.route('/tags/<int:tag_id>', methods=['DELETE'])
def delete_tag(tag_id):
    """–£–¥–∞–ª–∏—Ç—å —Ç—ç–≥"""
    tag = Tag.query.get_or_404(tag_id)

    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
    for instance in tag.instances:
        history = TagHistory(
            entity_type='instance',
            entity_id=instance.id,
            tag_id=tag.id,
            action='removed',
            changed_by='system',
            details={'reason': 'tag_deleted'}
        )
        db.session.add(history)

    db.session.delete(tag)
    db.session.commit()

    return jsonify({'success': True})

@bp.route('/applications/<int:app_id>/tags', methods=['GET'])
def get_application_tags(app_id):
    """–ü–æ–ª—É—á–∏—Ç—å —Ç—ç–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    app = ApplicationInstance.query.get_or_404(app_id)
    return jsonify({
        'success': True,
        'tags': [tag.to_dict() for tag in app.tags]
    })

@bp.route('/applications/<int:app_id>/tags', methods=['POST'])
def add_application_tag(app_id):
    """–î–æ–±–∞–≤–∏—Ç—å —Ç—ç–≥ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é"""
    app = ApplicationInstance.query.get_or_404(app_id)
    data = request.json

    tag_name = data.get('tag_name')
    if not tag_name:
        return jsonify({'success': False, 'error': 'tag_name is required'}), 400

    tag = app.add_tag(tag_name, user=data.get('user'))
    db.session.commit()

    return jsonify({
        'success': True,
        'tag': tag.to_dict()
    })

@bp.route('/applications/<int:app_id>/tags/<int:tag_id>', methods=['DELETE'])
def remove_application_tag(app_id, tag_id):
    """–£–¥–∞–ª–∏—Ç—å —Ç—ç–≥ —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    app = ApplicationInstance.query.get_or_404(app_id)
    tag = Tag.query.get_or_404(tag_id)

    app.remove_tag(tag.name, user=request.args.get('user'))
    db.session.commit()

    return jsonify({'success': True})

@bp.route('/applications/filter/by-tags', methods=['POST'])
def filter_by_tags():
    """–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ —Ç—ç–≥–∞–º"""
    data = request.json
    tag_names = data.get('tags', [])
    operator = data.get('operator', 'OR')  # OR –∏–ª–∏ AND

    query = ApplicationInstance.query

    if tag_names:
        if operator == 'AND':
            # –í—Å–µ —Ç—ç–≥–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
            for tag_name in tag_names:
                query = query.filter(
                    ApplicationInstance.tags.any(Tag.name == tag_name)
                )
        else:  # OR
            # –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç—ç–≥
            query = query.filter(
                ApplicationInstance.tags.any(Tag.name.in_(tag_names))
            )

    apps = query.all()

    return jsonify({
        'success': True,
        'applications': [app.to_dict() for app in apps],
        'total': len(apps),
        'filter': {
            'tags': tag_names,
            'operator': operator
        }
    })

@bp.route('/tags/statistics', methods=['GET'])
def get_tag_statistics():
    """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—ç–≥–æ–≤"""
    stats = []

    for tag in Tag.query.all():
        stats.append({
            'tag': tag.to_dict(),
            'instances_count': tag.instances.count(),
            'groups_count': tag.groups.count(),
            'total_usage': tag.get_usage_count()
        })

    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
    stats.sort(key=lambda x: x['total_usage'], reverse=True)

    return jsonify({
        'success': True,
        'statistics': stats,
        'total_tags': len(stats)
    })

# –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ endpoints –¥–ª—è ApplicationGroup
# ...
```

#### 2.2 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Blueprint

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/api/__init__.py`:**
```python
from app.api import tags_routes

def register_blueprints(app):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ blueprints ...
    app.register_blueprint(tags_routes.bp)
```

---

### –§–ê–ó–ê 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞ –≤ UI (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### 3.1 CSS —Å—Ç–∏–ª–∏

**–ù–æ–≤—ã–π —Ñ–∞–π–ª: `app/static/css/tags.css`**
```css
/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç—ç–≥–æ–≤ */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
}

/* –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å —Ç—ç–≥–∞ */
.tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 5px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.2px;
    white-space: nowrap;
    background: transparent;
    border: 1.5px solid;
    transition: all 0.2s;
    cursor: default;
}

.tag:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-1px);
}

.tag-icon {
    font-size: 13px;
    line-height: 1;
}

/* –°—Ç–∞—Ç—É—Å—ã */
.tag-status-online {
    border-color: #10b981;
    color: #10b981;
}

.tag-status-offline {
    border-color: #ef4444;
    color: #ef4444;
}

.tag-status-warning {
    border-color: #f59e0b;
    color: #f59e0b;
}

.tag-status-unknown {
    border-color: #6b7280;
    color: #9ca3af;
}

/* –¢–∏–ø—ã –≤–µ—Ä—Å–∏–π */
.tag-version-release {
    border-color: #3b82f6;
    color: #60a5fa;
}

.tag-version-snapshot {
    border-color: #8b5cf6;
    color: #a78bfa;
}

.tag-version-dev {
    border-color: #ec4899;
    color: #f472b6;
}

/* –û–∫—Ä—É–∂–µ–Ω–∏—è */
.tag-env-prod {
    border-color: #14b8a6;
    color: #2dd4bf;
}

.tag-env-test {
    border-color: #f97316;
    color: #fb923c;
}

.tag-env-dev {
    border-color: #a855f7;
    color: #c084fc;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–∫–∏ */
.tag-critical {
    border-color: #dc2626;
    color: #ef4444;
    animation: border-pulse 2s infinite;
}

.tag-monitored {
    border-color: #0ea5e9;
    color: #38bdf8;
}

.tag-deprecated {
    border-color: #78716c;
    color: #a8a29e;
    opacity: 0.7;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç—ç–≥–æ–≤ */
@keyframes border-pulse {
    0%, 100% {
        border-width: 1.5px;
        box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4);
    }
    50% {
        border-width: 2px;
        box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);
    }
}

/* Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç—ç–≥–æ–≤ */
.tag-critical:hover {
    background: rgba(220, 38, 38, 0.1);
    border-color: #ef4444;
}

.tag-monitored:hover {
    background: rgba(14, 165, 233, 0.1);
}

/* –§–∏–ª—å—Ç—Ä —Ç—ç–≥–æ–≤ */
.tag-filter-section {
    margin: 15px 0;
    padding: 10px;
    background: #252528;
    border-radius: 6px;
}

.tag-filter-toggle {
    background: #5ca5e1;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    cursor: pointer;
    font-size: 14px;
}

.tag-filter-toggle:hover {
    background: #4b8ec9;
}

.tag-filter-panel {
    display: none;
    margin-top: 15px;
    padding: 15px;
    background: #1e1e20;
    border-radius: 4px;
}

.tag-filter-panel.active {
    display: block;
}

.tag-filter-group {
    margin-bottom: 15px;
}

.tag-filter-group h4 {
    color: #5ca5e1;
    font-size: 14px;
    margin-bottom: 10px;
}

.tag-checkbox {
    display: inline-block;
    margin-right: 15px;
    margin-bottom: 8px;
}

.tag-checkbox label {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

/* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
.table-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    max-width: 300px;
}

.table-tags-container .tag {
    padding: 3px 8px;
    font-size: 11px;
}
```

#### 3.2 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/templates/base.html`:**
```html
<!-- –î–æ–±–∞–≤–∏—Ç—å –≤ —Å–µ–∫—Ü–∏—é <head> -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/tags.css') }}">
```

---

### –§–ê–ó–ê 4: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

#### 4.1 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ HTML

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/templates/applications.html`:**
```html
<!-- –í –∑–∞–≥–æ–ª–æ–≤–∫–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Å–ª–µ "–ò–º—è —Å–µ—Ä–≤–∏—Å–∞" -->
<th>–¢—ç–≥–∏</th>
```

#### 4.2 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ JavaScript

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/static/js/applications/applications.js`:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ –æ–±—ä–µ–∫—Ç
renderTags(tags) {
    if (!tags || tags.length === 0) {
        return '<span class="no-tags">‚Äî</span>';
    }

    const container = document.createElement('div');
    container.className = 'table-tags-container';

    tags.forEach(tag => {
        const span = document.createElement('span');
        span.className = `tag ${tag.css_class || ''}`;

        const icon = document.createElement('span');
        icon.className = 'tag-icon';
        icon.textContent = tag.icon || '‚óè';

        const text = document.createTextNode(' ' + (tag.display_name || tag.name));

        span.appendChild(icon);
        span.appendChild(text);
        container.appendChild(span);
    });

    return container.outerHTML;
},

// –í —Ñ—É–Ω–∫—Ü–∏–∏ createApplicationRow –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è nameTd:
// 3. –¢—ç–≥–∏ (–ù–û–í–ê–Ø –Ø–ß–ï–ô–ö–ê)
const tagsTd = document.createElement('td');
tagsTd.innerHTML = this.renderTags(app.tags || []);

// –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —è—á–µ–µ–∫:
row.appendChild(checkboxTd);
row.appendChild(nameTd);
row.appendChild(tagsTd);  // –ù–û–í–ê–Ø
row.appendChild(versionTd);
row.appendChild(statusTd);
row.appendChild(serverTd);
row.appendChild(actionsTd);

// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è createGroupRow
```

---

### –§–ê–ó–ê 5: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### 5.1 HTML –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–î–æ–±–∞–≤–∏—Ç—å –≤ `app/templates/applications.html` –ø–æ—Å–ª–µ search-container:**
```html
<div class="tag-filter-section">
    <button class="tag-filter-toggle" id="tag-filter-toggle">
        <span>üîç</span> –§–∏–ª—å—Ç—Ä –ø–æ —Ç—ç–≥–∞–º
    </button>
    <div class="tag-filter-panel" id="tag-filter-panel">
        <div class="tag-filter-controls">
            <label>
                <input type="radio" name="tag-operator" value="OR" checked>
                –õ—é–±–æ–π –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
            </label>
            <label>
                <input type="radio" name="tag-operator" value="AND">
                –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
            </label>
        </div>

        <div class="tag-filter-group">
            <h4>–°—Ç–∞—Ç—É—Å—ã</h4>
            <div class="tag-checkbox">
                <label>
                    <input type="checkbox" class="tag-filter-checkbox" value="online">
                    <span class="tag tag-status-online">
                        <span class="tag-icon">‚óè</span> Online
                    </span>
                </label>
            </div>
            <div class="tag-checkbox">
                <label>
                    <input type="checkbox" class="tag-filter-checkbox" value="offline">
                    <span class="tag tag-status-offline">
                        <span class="tag-icon">‚óè</span> Offline
                    </span>
                </label>
            </div>
            <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã -->
        </div>

        <div class="tag-filter-group">
            <h4>–û–∫—Ä—É–∂–µ–Ω–∏—è</h4>
            <!-- –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏–π -->
        </div>

        <div class="tag-filter-group">
            <h4>–í–µ—Ä—Å–∏–∏</h4>
            <!-- –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –≤–µ—Ä—Å–∏–π -->
        </div>

        <div class="tag-filter-actions">
            <button class="action-btn" id="apply-tag-filter">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            <button class="action-btn" id="clear-tag-filter">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </div>
</div>
```

#### 5.2 JavaScript –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–î–æ–±–∞–≤–∏—Ç—å –≤ `app/static/js/applications/applications.js`:**
```javascript
// –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
tagFilters: {
    enabled: false,
    tags: [],
    operator: 'OR'
},

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
initTagFilters() {
    const toggle = document.getElementById('tag-filter-toggle');
    const panel = document.getElementById('tag-filter-panel');
    const applyBtn = document.getElementById('apply-tag-filter');
    const clearBtn = document.getElementById('clear-tag-filter');

    toggle.addEventListener('click', () => {
        panel.classList.toggle('active');
    });

    applyBtn.addEventListener('click', () => {
        this.applyTagFilter();
    });

    clearBtn.addEventListener('click', () => {
        this.clearTagFilter();
    });
},

applyTagFilter() {
    const checkboxes = document.querySelectorAll('.tag-filter-checkbox:checked');
    const operator = document.querySelector('input[name="tag-operator"]:checked').value;

    this.tagFilters.tags = Array.from(checkboxes).map(cb => cb.value);
    this.tagFilters.operator = operator;
    this.tagFilters.enabled = this.tagFilters.tags.length > 0;

    this.loadApplications();
},

clearTagFilter() {
    document.querySelectorAll('.tag-filter-checkbox').forEach(cb => {
        cb.checked = false;
    });

    this.tagFilters.enabled = false;
    this.tagFilters.tags = [];

    this.loadApplications();
},

// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
async loadApplications() {
    let url = '/api/applications';

    if (this.tagFilters.enabled) {
        const response = await fetch('/api/applications/filter/by-tags', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                tags: this.tagFilters.tags,
                operator: this.tagFilters.operator
            })
        });
        const data = await response.json();
        this.renderApplications(data.applications);
    } else {
        // –û–±—ã—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
        const response = await fetch(url);
        const data = await response.json();
        this.renderApplications(data.applications);
    }
}
```

---

### –§–ê–ó–ê 6: –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

#### 6.1 HTML –±–ª–æ–∫ –≤ settings

**–î–æ–±–∞–≤–∏—Ç—å –≤ `app/templates/settings.html` –ø–æ—Å–ª–µ –±–ª–æ–∫–∞ –º–∞–ø–ø–∏–Ω–≥–æ–≤:**
```html
<div class="settings-section">
    <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—ç–≥–∞–º–∏</h4>

    <div class="tags-status-compact" id="tags-status-compact">
        <div class="status-line" id="tags-status-line">
            <span class="status-label">–°–∏—Å—Ç–µ–º–∞ —Ç—ç–≥–æ–≤</span>
            <span class="status-spacer"></span>
            <span class="status-indicator" id="tags-status-indicator">
                <span class="status-dot connected"></span>
                <span class="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </span>
            <span class="expand-arrow" id="tags-expand-arrow">‚ñº</span>
        </div>

        <div class="tags-details" id="tags-details" style="display: none;">
            <div class="tags-details-content">

                <!-- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–µ–≥–∞ -->
                <div class="detail-section">
                    <h5>–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞</h5>
                    <div class="tag-creator-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="tag-name">–ò–º—è —Ç–µ–≥–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)</label>
                                <input type="text" id="tag-name" class="form-control"
                                    placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: production">
                            </div>
                            <div class="form-group">
                                <label for="tag-display">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                                <input type="text" id="tag-display" class="form-control"
                                    placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: Production">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="tag-type">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select id="tag-type" class="form-control">
                                    <option value="status">–°—Ç–∞—Ç—É—Å</option>
                                    <option value="env">–û–∫—Ä—É–∂–µ–Ω–∏–µ</option>
                                    <option value="version">–í–µ—Ä—Å–∏—è</option>
                                    <option value="special">–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π</option>
                                    <option value="custom">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="tag-icon">–ò–∫–æ–Ω–∫–∞</label>
                                <select id="tag-icon" class="form-control">
                                    <option value="‚óè">‚óè (—Ç–æ—á–∫–∞)</option>
                                    <option value="‚úì">‚úì (–≥–∞–ª–æ—á–∫–∞)</option>
                                    <option value="‚ö†">‚ö† (warning)</option>
                                    <option value="üè¢">üè¢ (production)</option>
                                    <option value="üß™">üß™ (test)</option>
                                    <option value="üîß">üîß (dev)</option>
                                    <option value="üìä">üìä (monitored)</option>
                                    <option value="üóë">üóë (deprecated)</option>
                                    <option value="üì∏">üì∏ (snapshot)</option>
                                    <option value="üîπ">üîπ (diamond)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="tag-css">–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <select id="tag-css" class="form-control">
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å --</option>
                                <optgroup label="–°—Ç–∞—Ç—É—Å—ã">
                                    <option value="tag-status-online">Online (–∑–µ–ª–µ–Ω—ã–π)</option>
                                    <option value="tag-status-offline">Offline (–∫—Ä–∞—Å–Ω—ã–π)</option>
                                    <option value="tag-status-warning">Warning (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)</option>
                                </optgroup>
                                <optgroup label="–û–∫—Ä—É–∂–µ–Ω–∏—è">
                                    <option value="tag-env-prod">Production (–±–∏—Ä—é–∑–æ–≤—ã–π)</option>
                                    <option value="tag-env-test">Test (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)</option>
                                    <option value="tag-env-dev">Development (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)</option>
                                </optgroup>
                                <optgroup label="–í–µ—Ä—Å–∏–∏">
                                    <option value="tag-version-release">Release (—Å–∏–Ω–∏–π)</option>
                                    <option value="tag-version-snapshot">Snapshot (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)</option>
                                    <option value="tag-version-dev">Dev (—Ä–æ–∑–æ–≤—ã–π)</option>
                                </optgroup>
                                <optgroup label="–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ">
                                    <option value="tag-critical">Critical (–∫—Ä–∞—Å–Ω—ã–π –ø—É–ª—å—Å)</option>
                                    <option value="tag-monitored">Monitored (–≥–æ–ª—É–±–æ–π)</option>
                                    <option value="tag-deprecated">Deprecated (—Å–µ—Ä—ã–π)</option>
                                </optgroup>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</label>
                            <div id="tag-preview">
                                <span class="tag" id="tag-preview-element">
                                    <span class="tag-icon">‚óè</span>
                                    <span class="tag-text">Preview</span>
                                </span>
                            </div>
                        </div>

                        <button class="action-btn" id="create-tag-btn">
                            ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥
                        </button>
                    </div>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–≥–æ–≤ -->
                <div class="detail-section">
                    <h5>–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–≥–∏</h5>
                    <div id="tags-list-container" class="tags-list-container">
                        <div class="info-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–≥–æ–≤...</div>
                    </div>
                </div>

                <!-- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
                <div class="detail-section">
                    <h5>–ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ</h5>
                    <div class="bulk-assignment">
                        <div class="form-group">
                            <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏ –¥–ª—è –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è</label>
                            <div id="bulk-tags-select" class="bulk-tags-select">
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="bulk-target">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫</label>
                            <select id="bulk-target" class="form-control">
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å --</option>
                                <option value="group">–ì—Ä—É–ø–ø–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</option>
                                <option value="server">–í—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</option>
                                <option value="type">–¢–∏–ø—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</option>
                            </select>
                        </div>

                        <div class="form-group" id="bulk-target-select" style="display: none;">
                            <label>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ü–µ–ª—å</label>
                            <select id="bulk-target-value" class="form-control">
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ --</option>
                            </select>
                        </div>

                        <button class="action-btn" id="bulk-assign-btn" disabled>
                            –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ–≥–∏
                        </button>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="detail-section">
                    <h5>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h5>
                    <div id="tags-statistics" class="statistics-container">
                        <div class="info-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
```

#### 6.2 JavaScript –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ù–æ–≤—ã–π —Ñ–∞–π–ª: `app/static/js/settings/tags-management.js`**
```javascript
const TagsManagement = {
    tags: [],
    statistics: null,

    init() {
        this.setupEventHandlers();
        this.loadTags();
        this.loadStatistics();
    },

    setupEventHandlers() {
        // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞
        const statusLine = document.getElementById('tags-status-line');
        const details = document.getElementById('tags-details');
        const arrow = document.getElementById('tags-expand-arrow');
        let isExpanded = false;

        statusLine.addEventListener('click', () => {
            isExpanded = !isExpanded;
            details.style.display = isExpanded ? 'block' : 'none';
            arrow.classList.toggle('expanded', isExpanded);

            if (isExpanded && this.tags.length === 0) {
                this.loadTags();
            }
        });

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞
        document.getElementById('create-tag-btn').addEventListener('click', () => {
            this.createTag();
        });

        // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
        this.setupPreview();

        // –ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ
        this.setupBulkAssignment();
    },

    setupPreview() {
        const nameInput = document.getElementById('tag-name');
        const displayInput = document.getElementById('tag-display');
        const iconSelect = document.getElementById('tag-icon');
        const cssSelect = document.getElementById('tag-css');
        const preview = document.getElementById('tag-preview-element');

        const updatePreview = () => {
            const icon = iconSelect.value;
            const text = displayInput.value || nameInput.value || 'Preview';
            const cssClass = cssSelect.value;

            preview.className = `tag ${cssClass}`;
            preview.innerHTML = `
                <span class="tag-icon">${icon}</span>
                <span class="tag-text">${text}</span>
            `;
        };

        [nameInput, displayInput, iconSelect, cssSelect].forEach(el => {
            el.addEventListener('input', updatePreview);
        });
    },

    setupBulkAssignment() {
        const targetSelect = document.getElementById('bulk-target');
        const targetValueGroup = document.getElementById('bulk-target-select');
        const targetValue = document.getElementById('bulk-target-value');
        const assignBtn = document.getElementById('bulk-assign-btn');

        targetSelect.addEventListener('change', async () => {
            const target = targetSelect.value;

            if (!target) {
                targetValueGroup.style.display = 'none';
                assignBtn.disabled = true;
                return;
            }

            targetValueGroup.style.display = 'block';

            // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø—Ü–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
            let options = [];

            switch (target) {
                case 'group':
                    const groupsResp = await fetch('/api/app-groups');
                    const groupsData = await groupsResp.json();
                    options = groupsData.groups.map(g => ({
                        value: g.id,
                        text: g.name
                    }));
                    break;

                case 'server':
                    const serversResp = await fetch('/api/servers');
                    const serversData = await serversResp.json();
                    options = serversData.servers.map(s => ({
                        value: s.id,
                        text: s.hostname
                    }));
                    break;

                case 'type':
                    options = [
                        {value: 'docker', text: 'Docker'},
                        {value: 'eureka', text: 'Eureka'},
                        {value: 'site', text: 'Site'},
                        {value: 'service', text: 'Service'}
                    ];
                    break;
            }

            targetValue.innerHTML = '<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ --</option>';
            options.forEach(opt => {
                targetValue.innerHTML += `<option value="${opt.value}">${opt.text}</option>`;
            });

            assignBtn.disabled = false;
        });

        assignBtn.addEventListener('click', () => {
            this.performBulkAssignment();
        });
    },

    async loadTags() {
        try {
            const response = await fetch('/api/tags');
            const data = await response.json();

            if (data.success) {
                this.tags = data.tags;
                this.renderTagsList();
                this.renderBulkTagsSelect();
                this.updateStatusIndicator(data.total);
            }
        } catch (error) {
            console.error('Error loading tags:', error);
        }
    },

    renderTagsList() {
        const container = document.getElementById('tags-list-container');

        if (this.tags.length === 0) {
            container.innerHTML = '<div class="info-loading">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤</div>';
            return;
        }

        let html = `
            <table class="tags-table">
                <thead>
                    <tr>
                        <th>–¢–µ–≥</th>
                        <th>–ò–º—è</th>
                        <th>–¢–∏–ø</th>
                        <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
        `;

        this.tags.forEach(tag => {
            html += `
                <tr>
                    <td>
                        <span class="tag ${tag.css_class}">
                            <span class="tag-icon">${tag.icon}</span>
                            ${tag.display_name}
                        </span>
                    </td>
                    <td>${tag.name}</td>
                    <td>${tag.tag_type}</td>
                    <td>${tag.usage_count}</td>
                    <td>
                        <button class="btn-small btn-info" onclick="TagsManagement.editTag(${tag.id})">
                            –ò–∑–º–µ–Ω–∏—Ç—å
                        </button>
                        <button class="btn-small btn-danger" onclick="TagsManagement.deleteTag(${tag.id})">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </td>
                </tr>
            `;
        });

        html += '</tbody></table>';
        container.innerHTML = html;
    },

    renderBulkTagsSelect() {
        const container = document.getElementById('bulk-tags-select');

        let html = '';
        this.tags.forEach(tag => {
            html += `
                <div class="tag-checkbox">
                    <label>
                        <input type="checkbox" class="bulk-tag-checkbox" value="${tag.id}">
                        <span class="tag ${tag.css_class}">
                            <span class="tag-icon">${tag.icon}</span>
                            ${tag.display_name}
                        </span>
                    </label>
                </div>
            `;
        });

        container.innerHTML = html;
    },

    async createTag() {
        const name = document.getElementById('tag-name').value.trim();
        const displayName = document.getElementById('tag-display').value.trim();
        const type = document.getElementById('tag-type').value;
        const icon = document.getElementById('tag-icon').value;
        const cssClass = document.getElementById('tag-css').value;

        if (!name) {
            alert('–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ç–µ–≥–∞');
            return;
        }

        try {
            const response = await fetch('/api/tags', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    name: name,
                    display_name: displayName || name.charAt(0).toUpperCase() + name.slice(1),
                    tag_type: type,
                    icon: icon,
                    css_class: cssClass
                })
            });

            const data = await response.json();

            if (data.success) {
                showNotification('–¢–µ–≥ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ');
                this.loadTags();

                // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                document.getElementById('tag-name').value = '';
                document.getElementById('tag-display').value = '';
            } else {
                showError('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–∞: ' + data.error);
            }
        } catch (error) {
            console.error('Error creating tag:', error);
            showError('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–∞');
        }
    },

    async deleteTag(tagId) {
        if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–µ–≥? –û–Ω –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω —É –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.')) {
            return;
        }

        try {
            const response = await fetch(`/api/tags/${tagId}`, {
                method: 'DELETE'
            });

            const data = await response.json();

            if (data.success) {
                showNotification('–¢–µ–≥ —É–¥–∞–ª–µ–Ω');
                this.loadTags();
            }
        } catch (error) {
            console.error('Error deleting tag:', error);
        }
    },

    async performBulkAssignment() {
        const selectedTags = Array.from(
            document.querySelectorAll('.bulk-tag-checkbox:checked')
        ).map(cb => cb.value);

        const target = document.getElementById('bulk-target').value;
        const targetValue = document.getElementById('bulk-target-value').value;

        if (selectedTags.length === 0) {
            alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏ –¥–ª—è –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è');
            return;
        }

        if (!targetValue) {
            alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å –¥–ª—è –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è');
            return;
        }

        // –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç target –¥–µ–ª–∞–µ–º —Ä–∞–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
        // ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–æ–≤–æ–≥–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è ...

        showNotification('–¢–µ–≥–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã');
        this.loadStatistics();
    },

    async loadStatistics() {
        try {
            const response = await fetch('/api/tags/statistics');
            const data = await response.json();

            if (data.success) {
                this.statistics = data.statistics;
                this.renderStatistics();
            }
        } catch (error) {
            console.error('Error loading statistics:', error);
        }
    },

    renderStatistics() {
        const container = document.getElementById('tags-statistics');

        if (!this.statistics || this.statistics.length === 0) {
            container.innerHTML = '<div class="info-loading">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>';
            return;
        }

        let html = '<div class="statistics-grid">';

        // –¢–æ–ø-5 –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–µ–≥–æ–≤
        const top5 = this.statistics.slice(0, 5);

        top5.forEach(stat => {
            html += `
                <div class="stat-item">
                    <div class="stat-label">
                        <span class="tag ${stat.tag.css_class}">
                            <span class="tag-icon">${stat.tag.icon}</span>
                            ${stat.tag.display_name}
                        </span>
                    </div>
                    <div class="stat-value">${stat.total_usage}</div>
                    <div class="stat-detail">
                        –≠–∫–∑–µ–º–ø–ª—è—Ä—ã: ${stat.instances_count}, –ì—Ä—É–ø–ø—ã: ${stat.groups_count}
                    </div>
                </div>
            `;
        });

        html += '</div>';
        container.innerHTML = html;
    },

    updateStatusIndicator(count) {
        const statusText = document.querySelector('#tags-status-indicator .status-text');
        statusText.textContent = `${count} —Ç–µ–≥–æ–≤`;
    }
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById('tags-status-compact')) {
        TagsManagement.init();
    }
});
```

---

### –§–ê–ó–ê 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å batch –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô)

#### 7.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ batch –æ–ø–µ—Ä–∞—Ü–∏–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/api/routes.py`:**
```python
@bp.route('/applications/batch_update', methods=['POST'])
def batch_update_applications():
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–µ–≥–∞–º"""
    data = request.json

    # –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
    query = ApplicationInstance.query

    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞
    if 'tag_filter' in data:
        tag_names = data['tag_filter']
        tag_operator = data.get('tag_filter_operator', 'OR')

        if tag_operator == 'AND':
            for tag_name in tag_names:
                query = query.filter(
                    ApplicationInstance.tags.any(Tag.name == tag_name)
                )
        else:  # OR
            query = query.filter(
                ApplicationInstance.tags.any(Tag.name.in_(tag_names))
            )

    # –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ app_ids
    if 'app_ids' in data:
        query = query.filter(ApplicationInstance.id.in_(data['app_ids']))

    applications = query.all()

    # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
    strategy = data.get('grouping_strategy', 'by_group')

    if strategy == 'by_tags':
        # –ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Ç–µ–≥–∞–º
        groups = {}
        for app in applications:
            tag_key = ','.join(sorted(app.get_tag_names()))
            if tag_key not in groups:
                groups[tag_key] = []
            groups[tag_key].append(app)

        # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
        for tag_key, apps in groups.items():
            task = Task(
                task_type='update',
                app_ids=[app.id for app in apps],
                distr_url=data.get('distr_url'),
                restart_mode=data.get('restart_mode'),
                grouping_key=tag_key
            )
            db.session.add(task)

    elif strategy == 'by_tags_and_group':
        # –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
        # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ...

    else:
        # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

    db.session.commit()

    return jsonify({
        'success': True,
        'message': f'–°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞—á: {len(groups)}',
        'affected_apps': len(applications)
    })
```

#### 7.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/models/application_group.py`:**
```python
BATCH_GROUPING_STRATEGIES = {
    'by_group': '–ø–æ –≥—Ä—É–ø–ø–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π',
    'by_server': '–ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º',
    'by_instance_name': '–ø–æ –∏–º–µ–Ω–∞–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤',
    'no_grouping': '–±–µ–∑ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏',
    'by_tags': '–ø–æ —Ç–µ–≥–∞–º',  # –ù–û–í–ê–Ø
    'by_tags_and_group': '–ø–æ —Ç–µ–≥–∞–º –∏ –≥—Ä—É–ø–ø–∞–º'  # –ù–û–í–ê–Ø
}
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### API Endpoints

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/tags | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ–≥–æ–≤ |
| POST | /api/tags | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ |
| PUT | /api/tags/{id} | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ |
| DELETE | /api/tags/{id} | –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ |
| GET | /api/applications/{id}/tags | –¢–µ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| POST | /api/applications/{id}/tags | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥ |
| DELETE | /api/applications/{id}/tags/{tag_id} | –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥ |
| POST | /api/applications/filter/by-tags | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º |
| GET | /api/tags/statistics | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
| POST | /api/tags/bulk-assign | –ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ |

### –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏

| –ò–º—è | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | CSS –∫–ª–∞—Å—Å | –ò–∫–æ–Ω–∫–∞ | –¶–≤–µ—Ç |
|-----|-----------|-----------|--------|------|
| online | status | tag-status-online | ‚óè | #10b981 |
| offline | status | tag-status-offline | ‚óè | #ef4444 |
| warning | status | tag-status-warning | ‚óè | #f59e0b |
| production | env | tag-env-prod | üè¢ | #14b8a6 |
| test | env | tag-env-test | üß™ | #f97316 |
| development | env | tag-env-dev | üîß | #a855f7 |
| release | version | tag-version-release | ‚úì | #3b82f6 |
| snapshot | version | tag-version-snapshot | üì∏ | #8b5cf6 |
| dev | version | tag-version-dev | üîπ | #ec4899 |
| critical | special | tag-critical | ‚ö† | #dc2626 |
| monitored | special | tag-monitored | üìä | #0ea5e9 |
| deprecated | special | tag-deprecated | üóë | #78716c |

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –ø–æ —Ñ–∞–∑–∞–º

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 1 (–ë–î):
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –ú–æ–¥–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- [ ] –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏ –≤ –ë–î
- [ ] –ú–µ—Ç–æ–¥—ã add_tag/remove_tag —Ä–∞–±–æ—Ç–∞—é—Ç

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 2 (API):
- [ ] –í—Å–µ endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 3 (–î–∏–∑–∞–π–Ω):
- [ ] CSS –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- [ ] –¢–µ–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (critical pulse)
- [ ] Hover —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 4 (–¢–∞–±–ª–∏—Ü–∞):
- [ ] –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –¢–µ–≥–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ JavaScript –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –¢–µ–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 5 (–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è):
- [ ] –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è/–∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (OR/AND)
- [ ] –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°—á–µ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 6 (–ù–∞—Å—Ç—Ä–æ–π–∫–∏):
- [ ] –ë–ª–æ–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

#### –ü–æ—Å–ª–µ –§–∞–∑—ã 7 (Batch):
- [ ] –ù–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- [ ] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–µ–≥–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Ç–µ–≥–∞
1. –û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–ª–æ–∫ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏"
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ–≥ "custom-tag"
4. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
5. –í—ã–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
6. –ü—Ä–∏—Å–≤–æ–∏—Ç—å —Ç–µ–≥ —á–µ—Ä–µ–∑ API
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
2. –û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤
3. –í—ã–±—Ä–∞—Ç—å —Ç–µ–≥–∏ "production" –∏ "critical"
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º AND
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
6. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ OR
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Batch –æ–ø–µ—Ä–∞—Ü–∏—è
1. –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–µ–≥—É "test"
2. –í—ã–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å batch update
4. –í—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é "by_tags"
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–µ–≥–æ–≤ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞, –∏–Ω–¥–µ–∫—Å—ã –ë–î |
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–µ–≥–∞ | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ |
| –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏ | –ù–∏–∑–∫–∞—è | –ù–∏–∑–∫–æ–µ | –ü–æ–ª–∏—Ñ–∏–ª–ª—ã –¥–ª—è CSS |

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã —Ç–µ–≥–æ–≤ —Å:
- –ì–∏–±—Ä–∏–¥–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –º–∞–∫–µ—Ç–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤–æ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü–æ–ª–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –§–∞–∑—ã 1-4 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ), –∑–∞—Ç–µ–º 5-7 (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ).

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω**: {{ current_date }}
**–í–µ—Ä—Å–∏—è –ø–ª–∞–Ω–∞**: 1.0
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏